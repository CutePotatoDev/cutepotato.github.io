<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="initial-scale=0.5">

        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="0">
        <meta http-equiv="pragma" content="no-cache">

        <title>cat potato_log.txt</title>

        <link rel="stylesheet" href="/static/page.css"></link>
        <link rel="stylesheet" href="/static/atelier-forest-light.css"></link>
        <link rel="stylesheet" href="/static/bootstrap.min.css"></link>
        <link rel="stylesheet" href="/static/simplebar.css"></link>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script type="text/javascript" src="/static/highlight.pack.js"></script>
        <script type="text/javascript" src="/static/simplebar.min.js"></script>
        <script>
            hljs.highlightAll()
        </script>
    </head>
    <body>
        <div class="container-md h-100">
            <div class="row h-100">
                <div class="col h-100">
                    <div class="d-flex flex-column h-100">
                        <div class="row">
                            <div class="col text-nowrap">
                                <div id="header">potato_log.txt</div>
<div>--------------------+--------------------------------</div>
                            </div>
                        </div>
                        <div class="row flex-grow-1 position-relative overflow-hidden">
                            <div class="col-auto h-100" id="menu-col">
                                <div id="menu">
                                    * <a href="/index.html">Home</a><br>
                                    * CherryPy<br>
                                    &nbsp;&nbsp;> <a href="./cpusefull.html">Usefull</a><br>
                                    * RPi<br>
                                    &nbsp;&nbsp;> <a href="./piwifirepeater.html">WiFi repeater</a><br>
                                    * <a href="/ar/ar.html">Amateur Radio</a><br>
                                    
&nbsp;&nbsp;> <a href="/ar/exam.html">Examination</a><br>
&nbsp;&nbsp;> <a href="/ar/swl.html">Listening</a><br>
 
                                </div>
                                <div id="divider">
                                    ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
                                </div>
                            </div>
                            <div class="col h-100 px-0">
                                <div id="content" class="h-100">
                                    
<script>
    function addRow(time, callsign, countrycode, frequency, comment) {
        let row = `
            <tr>
                <td class="py-1 col-2">${time}</td>
                <td class="py-1 col-1"><div class="d-inline-block" style="width: 3.1rem">${callsign}</div> <img src="/static/flags/${countrycode}.png" class="img-fluid mb-1"></td>
                <td class="py-1 col-1">${frequency}</td>
                <td class="py-1 col-8">${comment}</td>
            </tr>
        `
        document.getElementById("datatable").insertAdjacentHTML("afterbegin", row);
    }

    function loadTable(data) {
        for (let row of data.list) {
            let countrycode = Object.keys(data.countrymap).find(key => data.countrymap[key].find(value => row.callsign.startsWith(value)))
            addRow(row.time, row.callsign, countrycode, row.frequency, row.comment)
        }
    }

    fetch("swllog.json").then(resp => resp.json()).then(json => loadTable(json));
</script>

<table class="table table-hover">
    <tbody id="datatable">

    </tbody>
</table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>